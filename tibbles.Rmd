---
title: "10. Tibbles"
output:
  html_document:
    toc: true
    toc_depth: 3
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo=TRUE)
library(nycflights13)
library(tidyverse)
```

### 10.5 Exercises

1.  How can you tell if an object is a tibble? (Hint: try printing `mtcars`,
    which is a regular data frame).

`# A tibble:` is displayed in the top left when printing the data frame. Additional information is printed, such as column types and total number of rows and columns.

2.  Compare and contrast the following operations on a `data.frame` and 
    equivalent tibble. What is different? Why might the default data frame
    behaviours cause you frustration?

```{r, eval=FALSE}
df <- data.frame(abc = 1, xyz = "a")
df$x
df[, "xyz"]
df[, c("abc", "xyz")]
```

```{r}
df <- tibble(abc = 1, xyz = "a")
df$x
df[, "xyz"]
df[, c("abc", "xyz")]
```

The default data frame uses partial matching. In comparison, tibbles do not. By default, data frames also appear to store strings as factors (see `df[, "xyz"` and `df[, c("abc","xyz")]` output).

3.  If you have the name of a variable stored in an object, e.g. `var <- "mpg"`,
    how can you extract the reference variable from a tibble?

By using the double bracket, `[[`. For example, `df[[var]]`.

4.  Practice referring to non-syntactic names in the following data frame by:

    1.  Extracting the variable called `1`.

    1.  Plotting a scatterplot of `1` vs `2`.

    1.  Creating a new column called `3` which is `2` divided by `1`.
        
    1.  Renaming the columns to `one`, `two` and `three`. 
    
    ```{r}
    annoying <- tibble(
      `1` = 1:10,
      `2` = `1` * 2 + rnorm(length(`1`))
    )
    ```

Extracting the variable called `1`:

```{r}
annoying$`1`
```

Plotting a scatterplot of `1` vs `2`:

```{r}
ggplot(annoying, aes(`1`, `2`)) +
  geom_point()
```

Creating a new column called `3` which is `2` divided by `1`:

```{r}
annoying <- annoying %>%
  mutate(`3` = `2` / `1`)
```

Renaming the columns to `one`, `two` and `three`:

```{r}
annoying <- annoying %>%
  rename(`one` = `1`,
         `two` = `2`,
         `three` = `3`)
```

5.  What does `tibble::enframe()` do? When might you use it?

It converts atomic vectors or lists to two-column data frames.

6.  What option controls how many additional column names are printed
    at the footer of a tibble?

`n_extra` from `print.tbl()`. For example:
```{r}
print(flights, n_extra = 1)
```